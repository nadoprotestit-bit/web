<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Mas√°≈æn√≠ sal√≥n Body Balance</title>
  <meta name="description" content="Profesion√°ln√≠ mas√°≈æe: relaxaƒçn√≠, l√©ƒçebn√©, sportovn√≠. Objednejte se online. D√°rkov√© poukazy.">
  <meta name="keywords" content="mas√°≈æe, relaxace, sportovn√≠ mas√°≈æ, d√°rkov√© poukazy, terapie">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />

  <style>
    :root{--bg:#fff5f7;--card:#fff;--accent:#ff4081;--muted:#555;--accent-secondary:#ff6b9d;--accent-light:#ffe0e8}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#222;line-height:1.5}
    .container{max-width:1200px;margin:0 auto;padding:24px}
    header.hero{background:linear-gradient(135deg, rgba(255,64,129,0.75), rgba(156,39,176,0.75), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1554861694-64c9b6f6b4a6?auto=format&fit=crop&w=1400&q=60') center/cover no-repeat;color:#fff;padding:72px 0}
    header .brand{display:flex;align-items:center;gap:12px}
    .brand h1{margin:0;font-size:28px}
    .brand h2{margin:0;font-size:20px;color:#111;font-weight:800;letter-spacing:0.2px}
    .hero-content{display:flex;align-items:center;justify-content:space-between;gap:40px}
    .hero-left{max-width:640px;flex:1}
    .hero-right{flex:1;max-width:500px;display:flex;align-items:center;justify-content:center}
    .hero-image{width:100%;max-width:500px;height:400px;object-fit:cover;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);border:4px solid rgba(255,255,255,0.2)}
    .cta{display:inline-block;background:var(--accent);color:#fff;padding:12px 18px;border-radius:10px;text-decoration:none;font-weight:600;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(255,64,129,0.3)}
    .cta:hover{background:var(--accent-secondary);transform:translateY(-2px);box-shadow:0 6px 16px rgba(255,64,129,0.4)}
    nav.top{background:rgba(255,255,255,0.98);backdrop-filter:blur(8px);position:sticky;top:0;z-index:50;box-shadow:0 2px 8px rgba(255,64,129,0.1);border-bottom:2px solid var(--accent-light)}
    nav .navwrap{display:flex;align-items:center;justify-content:space-between;padding:9px 22px}
    /* place brand on the left and links on the right; keep vertical centering */
    .brand{display:flex;align-items:center;gap:12px;position:static;transform:none}
    .brand h2{text-align:left;font-size:20px;margin:0;font-weight:800;color:#111;letter-spacing:0.2px}
    nav .links a{margin-left:18px;text-decoration:none;color:#222;font-weight:600;transition:color 0.3s ease;position:relative}
    nav .links a:hover{color:var(--accent)}
    nav .links a::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:2px;background:var(--accent);transition:width 0.3s ease}
    nav .links a:hover::after{width:100%}

    .grid{display:grid;gap:18px}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(255,64,129,0.08);border:1px solid rgba(255,64,129,0.1);transition:all 0.3s ease}
    .card:hover{box-shadow:0 8px 24px rgba(255,64,129,0.15);transform:translateY(-2px)}
    .service{position:relative}
    .service-icon{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg, var(--accent-light), rgba(255,64,129,0.1));display:flex;align-items:center;justify-content:center;margin-bottom:12px;font-size:24px}
    .service h3{margin-top:0;color:var(--accent);font-weight:700}
    h2{color:var(--accent);font-weight:800;position:relative;display:inline-block}
    h2::after{content:'';position:absolute;bottom:-4px;left:0;width:60px;height:3px;background:linear-gradient(90deg, var(--accent), var(--accent-secondary));border-radius:2px}

    .pricing{display:flex;gap:16px;flex-wrap:wrap}
    .price{flex:1;min-width:200px;position:relative;text-align:center}
    .price-icon{width:60px;height:60px;border-radius:12px;background:linear-gradient(135deg, var(--accent), var(--accent-secondary));display:flex;align-items:center;justify-content:center;margin:0 auto 12px;font-size:28px;box-shadow:0 4px 12px rgba(255,64,129,0.2)}
    .price h4{color:var(--accent);font-weight:700;margin-top:0}
    .price strong{color:var(--accent-secondary);font-size:1.4em;display:block;margin-top:8px}

    .contact-grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    .contact-image{width:100%;height:200px;object-fit:cover;border-radius:12px;margin-top:12px;box-shadow:0 4px 12px rgba(255,64,129,0.1)}

    /* Services horizontal scroller */
    .services-wrap{position:relative}
    .services-row{display:flex;gap:18px;overflow-x:auto;padding:6px 6px 6px 6px;scroll-behavior:smooth}
    /* hide native scrollbar */
    .services-row::-webkit-scrollbar{display:none;height:0}
    .services-row{-ms-overflow-style:none;scrollbar-width:none}
    .services-row .card{min-width:260px;flex:0 0 auto}
    .scroll-btn{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;border-radius:10px;border:0;background:var(--accent);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:8;opacity:0.9;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(255,64,129,0.3)}
    .scroll-btn:hover{background:var(--accent-secondary);opacity:1;transform:translateY(-50%) scale(1.1)}
    /* place buttons inside the services frame, overlaying content */
    .scroll-btn.left{left:12px}
    .scroll-btn.right{right:12px}
    .scroll-btn:focus{outline:2px solid var(--accent)}
    .services-wrap:hover .scroll-btn{opacity:1}
    @media (max-width:900px){.scroll-btn.left{left:8px}.scroll-btn.right{right:8px}}

    footer{padding:28px;text-align:center;color:var(--muted)}

    @media (max-width:900px){
      .hero-content{flex-direction:column}
      .hero-image{max-width:100%;height:300px;margin-top:20px}
      .contact-grid{grid-template-columns:1fr}
      .grid.cols-3{grid-template-columns:1fr}
    }

    .muted{color:var(--muted)}
    .center{text-align:center}

    .faq-item{margin-bottom:8px}
    .faq-item button{width:100%;text-align:left;padding:12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:var(--card);color:inherit}
    .faq-item .panel{display:none;padding:12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);border-top:none;background:var(--card);color:inherit;font-size:18px;line-height:1.6}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.active{display:flex}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:20px;opacity:0;transition:opacity .22s ease}
    .modal.active{display:flex;opacity:1}
    .modal .box{width:100%;max-width:520px;background:var(--card);color:inherit;padding:18px;border-radius:12px;box-shadow:0 30px 60px rgba(2,6,23,0.4);transform:translateY(6px);transition:transform .22s ease,opacity .22s ease}
    .modal.active .box{transform:translateY(0)}
    /* Booking form styles */
    .booking-form input,.booking-form select,.booking-form textarea{width:100%;padding:10px;border:1px solid rgba(0,0,0,0.08);border-radius:8px;margin-top:8px;background:var(--card);color:inherit}
    .booking-form select{appearance:auto;-webkit-appearance:auto}
    .booking-form select option{background:var(--card);color:inherit}
    /* Style native calendar picker indicator where possible */
    input[type="datetime-local"]{background:var(--card);color:inherit}
    input[type="datetime-local"]::-webkit-calendar-picker-indicator{filter:none;opacity:1;color:var(--muted);cursor:pointer}
    /* Force native calendar icon to appear light on dark backgrounds */
    input[type="datetime-local"]::-webkit-calendar-picker-indicator{
      -webkit-filter: invert(1) brightness(2) saturate(0);
      filter: invert(1) brightness(2) saturate(0);
      opacity:1;
    }
    input[type="datetime-local"]:focus::-webkit-calendar-picker-indicator{
      -webkit-filter: invert(1) brightness(2) saturate(0) drop-shadow(0 0 0 #fff);
      filter: invert(1) brightness(2) saturate(0) drop-shadow(0 0 0 #fff);
    }
    input[type="datetime-local"]::-webkit-datetime-edit-text,input[type="datetime-local"]::-webkit-datetime-edit-month-field,input[type="datetime-local"]::-webkit-datetime-edit-day-field,input[type="datetime-local"]::-webkit-datetime-edit-year-field{color:inherit}
    input[type="datetime-local"]::-moz-calendar-picker-indicator{filter:none;opacity:1;color:var(--muted);cursor:pointer}
    input[type="datetime-local"]::-moz-calendar-picker-indicator{filter: invert(1) brightness(2) saturate(0);}
    .booking-form input::placeholder,.booking-form textarea::placeholder{color:rgba(34,34,34,0.5)}
    @media (prefers-color-scheme:dark){
      .booking-form input::placeholder,.booking-form textarea::placeholder{color:rgba(230,238,240,0.45)}
    }
    .booking-form label{font-weight:600;margin-top:8px;display:block}
    .booking-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
    .btn-secondary{background:transparent;border:1px solid rgba(0,0,0,0.08);padding:10px 14px;border-radius:8px;color:inherit}
    .field-error{color:#e91e63;font-size:13px;margin-top:6px;font-weight:600}
    
    /* Contact phone/name order and spacing */
    .contact-phone{display:flex;align-items:center;gap:8px}
    .contact-phone .phone-link{color:var(--accent);text-decoration:none;font-weight:400}
    /* Make contact name match the visual weight of the 'Telefon' label */
    .contact-phone .contact-name{color:inherit;font-weight:700;margin-left:8px}

    /* Opening hours styling (frame tuned) */
    .hours-card{max-width:720px;margin:18px auto;padding:14px 18px;border-radius:12px;background:linear-gradient(135deg, var(--card), var(--accent-light));border:2px solid var(--accent-light);box-shadow:0 6px 18px rgba(255,64,129,0.12);text-align:center}
    /* Title: white text with underline for emphasis */
    .hours-title{
      display:inline-block;
      text-align:center;
      margin:0 auto 12px;
      font-size:20px;
      font-weight:800;
      color:#fff;
      background:none;
      padding:0;
      border-radius:0;
      text-decoration:underline;
      text-decoration-color: rgba(255,255,255,0.95);
      text-decoration-thickness:2px;
      text-underline-offset:6px;
      text-shadow:0 1px 0 rgba(0,0,0,0.12);
    }
    .hours-grid{display:grid;grid-template-columns:1fr auto;gap:8px 20px;align-items:center;max-width:520px;margin:8px auto 0;font-size:inherit}
    .hours-grid .day{justify-self:start;color:inherit;font-size:inherit}
    .hours-grid .time{justify-self:end;font-weight:600;color:inherit}
    /* Highlight weekend rows subtly with accent color */
    .hours-grid .day.weekend{color:var(--accent);font-weight:700}
    .hours-grid .time.weekend{color:var(--accent);font-weight:700}
    @media (max-width:480px){
      .hours-grid{grid-template-columns:1fr;gap:6px 0;text-align:left;margin:8px 16px 0}
      .hours-grid .time{justify-self:start}
    }

    @media (prefers-color-scheme:dark){:root{--bg:#1a0f1a;--card:#2d1b2d;--accent:#ff6b9d;--muted:#b0a0b0;--accent-secondary:#ff4081;--accent-light:#3d2a3d}body{color:#e6eef0}}
  </style>
</head>
<body>
  <nav class="top">
    <div class="navwrap container">
      <div class="brand">
        <h2>Mas√°≈æn√≠ sal√≥n Body Balance</h2>
      </div>
      <div class="links">
        <a href="#sluzby">Slu≈æby</a>
        <a href="#cenik">Cen√≠k</a>
        <a href="#oteviraci-doba">Otev√≠rac√≠ doba</a>
        <a href="#kontakt">Kontakt</a>
        <a href="#kontakt" id="open-book">Rezervace</a>
      </div>
    </div>
  </nav>

  <header class="hero" role="banner">
    <div class="container hero-content">
      <div class="hero-left">
        <p class="muted">Profesion√°ln√≠ p√©ƒçe | Certifikovan√Ω terapeut</p>
        <h1 style="font-size:44px;margin:8px 0 12px">Uvolni tƒõlo, uklidni mysl ‚Äî obnov energii</h1>
        <p class="muted">Relaxaƒçn√≠, l√©ƒçebn√© a sportovn√≠ mas√°≈æe na m√≠ru. D√°rkov√© poukazy a dlouhodob√° p√©ƒçe.</p>
        <div style="margin-top:18px">
          <a class="cta" href="#kontakt">Kontaktujte n√°s</a>
          <a class="cta" id="cta-book" href="#kontakt" style="background:rgba(255,255,255,0.2);backdrop-filter:blur(4px);margin-left:10px;border:2px solid rgba(255,255,255,0.3)">Objednat online</a>
        </div>
      </div>
      <div class="hero-right">
        <img src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?auto=format&fit=crop&w=800&q=80" alt="Relaxaƒçn√≠ mas√°≈æ" class="hero-image">
      </div>
    </div>
  </header>

  <main class="container">
    <section id="sluzby" style="margin-top:28px">
      <h2>Slu≈æby</h2>
      <div class="services-wrap" style="margin-top:12px;position:relative">
        <button class="scroll-btn left" aria-label="Posunout vlevo">‚óÄ</button>
        <div class="services-row" tabindex="0">
          <div class="card service">
            <div class="service-icon">üíÜ</div>
            <h3>Mas√°≈æ zad ‚Äî 60 min</h3>
            <p class="muted">Zamƒõ≈ôen√° na uvolnƒõn√≠ zadn√≠ch sval≈Ø a bolesti</p>
          </div>
          <div class="card service">
            <div class="service-icon">üßò</div>
            <h3>Celotƒõlov√° mas√°≈æ ‚Äî 120 min</h3>
            <p class="muted">Komplexn√≠ mas√°≈æ cel√©ho tƒõla pro hlubokou regeneraci</p>
          </div>
          <div class="card service">
            <div class="service-icon">‚ú®</div>
            <h3>Mas√°≈æ ≈°√≠je (l√≠mcov√° oblast) ‚Äî 40 min</h3>
            <p class="muted">Zamƒõ≈ôeno na krƒçn√≠ p√°te≈ô a uvolnƒõn√≠ napƒõt√≠</p>
          </div>
          <div class="card service">
            <div class="service-icon">üë∂</div>
            <h3>Dƒõtsk√° mas√°≈æ ‚Äî 30‚Äì40 min</h3>
            <p class="muted">Jemn√° mas√°≈æ vhodn√° pro dƒõti</p>
          </div>
          <div class="card service">
            <div class="service-icon">üåä</div>
            <h3>Lymfodren√°≈æ (p≈ô√≠stroj 3v1) ‚Äî 30 min</h3>
            <p class="muted">Profesion√°ln√≠ lymfodren√°≈æn√≠ p≈ô√≠stroj 3v1 ‚Äî InfraSauna &amp; EMS</p>
          </div>
        </div>
        <button class="scroll-btn right" aria-label="Posunout vpravo">‚ñ∂</button>
      </div>
    </section>

    <section id="cenik" style="margin-top:28px">
      <h2>Cen√≠k</h2>
      <div class="pricing" style="margin-top:12px">
        <div class="card price">
          <div class="price-icon">üíÜ</div>
          <h4>Mas√°≈æ zad ‚Äî 60 min</h4>
          <p><strong>600 Kƒç</strong></p>
        </div>
        <div class="card price">
          <div class="price-icon">üßò</div>
          <h4>Celotƒõlov√° mas√°≈æ ‚Äî 120 min</h4>
          <p><strong>1100 Kƒç</strong></p>
        </div>
        <div class="card price">
          <div class="price-icon">‚ú®</div>
          <h4>Mas√°≈æ ≈°√≠je (l√≠mcov√° oblast) ‚Äî 40 min</h4>
          <p><strong>400 Kƒç</strong></p>
        </div>
        <div class="card price">
          <div class="price-icon">üë∂</div>
          <h4>Dƒõtsk√° mas√°≈æ ‚Äî 30‚Äì40 min</h4>
          <p><strong>300‚Äì400 Kƒç</strong></p>
        </div>
        <div class="card price">
          <div class="price-icon">üåä</div>
          <h4>Lymfodren√°≈æ (p≈ô√≠stroj 3v1) ‚Äî 30 min</h4>
          <p><strong>400 Kƒç</strong></p>
        </div>
      </div>
    </section>

    <section id="kontakt" style="margin-top:28px">
      <h2>Kontakt</h2>
      <div class="contact-grid" style="margin-top:12px">
        <div>
          <div class="card">
            <h3>Kontakt</h3>
            <img src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?auto=format&fit=crop&w=800&q=60" alt="Mas√°≈æn√≠ sal√≥n interi√©r" class="contact-image">
            <p class="contact-phone" style="margin-top:16px"><strong>Telefon:</strong><a class="phone-link" href="tel:+420775436270">+420 775 436 270</a><strong class="contact-name">Nataliia</strong></p>
            <p><strong>Email:</strong> masaze@firma.cz</p>
            <p><strong>Adresa:</strong> ƒåernokosteleck√° 526/55a, 251&nbsp; 01 ≈ò√≠ƒçany u Prahy</p>
          </div>
        </div>
        <div>
          <div class="card">
            <h3>Mapa</h3>
            <iframe src="https://www.google.com/maps?q=Cernokostelecka+526%2F55a+251+01+Ricany+u+Prahy&output=embed" width="100%" height="300" style="border:0;border-radius:8px" loading="lazy"></iframe>
          </div>
        </div>
      </div>
    </section>

  </main>

    <!-- Opening hours (moved to page end) -->
    <div class="container">
      <section id="oteviraci-doba" style="margin-top:28px">
        <div class="card hours-card">
          <h3 class="hours-title">Otev√≠rac√≠ doba</h3>
          <div class="hours-grid">
            <div class="day">Pondƒõl√≠</div><div class="time">17:00 ‚Äì 19:30</div>
            <div class="day">√öter√Ω</div><div class="time">17:00 ‚Äì 19:30</div>
            <div class="day">St≈ôeda</div><div class="time">17:00 ‚Äì 19:30</div>
            <div class="day">ƒåtvrtek</div><div class="time">17:00 ‚Äì 19:30</div>
            <div class="day">P√°tek</div><div class="time">17:00 ‚Äì 19:30</div>
            <div class="day weekend">Sobota</div><div class="time weekend">11:00 ‚Äì 19:00</div>
            <div class="day weekend">Nedƒõle</div><div class="time weekend">11:00 ‚Äì 19:00</div>
          </div>
        </div>
      </section>
    </div>

  <footer>
    <div class="container">
      <p>¬© 2025 Mas√°≈æn√≠ sal√≥n Body Balance. <span class="muted">V≈°echny pr√°va vyhrazena.</span></p>
      <p class="muted">Mal√© podnik√°n√≠ ‚Äî velk√° p√©ƒçe.</p>
    </div>
  </footer>

  <!-- Booking Modal -->
  <div id="booking-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="booking-title">
    <div class="box" role="document">
      <h3 id="booking-title">Objedn√°vka / Rezervace</h3>
      <form id="booking-form" class="booking-form">
        <label for="b-name">Jm√©no a p≈ô√≠jmen√≠</label>
        <input id="b-name" name="name" type="text" required placeholder="Va≈°e jm√©no">

        <label for="b-phone">Telefon</label>
        <input id="b-phone" name="phone" type="tel" required placeholder="420 123 456 789">

        <label for="b-email">Email</label>
        <input id="b-email" name="email" type="email" placeholder="email@domena.cz">

        <label for="b-service">Slu≈æba</label>
        <select id="b-service" name="service">
          <option value="masaz-zad">Mas√°≈æ zad ‚Äî 60 min</option>
          <option value="celotelova">Celotƒõlov√° mas√°≈æ ‚Äî 120 min</option>
          <option value="masaz-sije">Mas√°≈æ ≈°√≠je (l√≠mcov√° oblast) ‚Äî 40 min</option>
          <option value="detska">Dƒõtsk√° mas√°≈æ ‚Äî 30‚Äì40 min</option>
          <option value="lymfodrenaz">Lymfodren√°≈æ (p≈ô√≠stroj 3v1) ‚Äî 30 min</option>
        </select>

        <label for="b-date">Preferovan√© datum / ƒças</label>
        <input id="b-date" name="date" type="datetime-local" required>

        <label for="b-note">Pozn√°mka</label>
        <textarea id="b-note" name="note" rows="3" placeholder="Specifikujte pros√≠m p≈ô√≠padn√© zdravotn√≠ omezen√≠ nebo p≈ô√°n√≠"></textarea>

        <div class="booking-actions">
          <button type="button" id="booking-cancel" class="btn-secondary">Zru≈°it</button>
          <button type="submit" class="cta">Odeslat objedn√°vku</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    document.querySelectorAll('.faq-item button').forEach(btn=>{btn.addEventListener('click', ()=>{const expanded=btn.getAttribute('aria-expanded')==='true';btn.setAttribute('aria-expanded',String(!expanded));const panel=btn.nextElementSibling;panel.style.display=expanded?'none':'block';})});
    // Smooth scroll for in-page anchors (works for #kontakt and other internal links)
    document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener('click',function(e){const target=document.querySelector(this.getAttribute('href'));if(target){e.preventDefault();target.scrollIntoView({behavior:'smooth'});}});});

    // Booking modal behavior (enhanced implementation follows)
      // Booking modal behavior + validation + submit (fetch with mailto fallback)
      const bookingModal=document.getElementById('booking-modal');
      const bookingForm=document.getElementById('booking-form');
      const openBtns=[document.getElementById('cta-book'),document.getElementById('open-book')];
      const mainContent=document.querySelector('main');
      const BOOKING_ENDPOINT = ''; // <-- optionally set your API endpoint here (POST JSON)

      function openBooking(){
        bookingModal.classList.add('active');
        if(mainContent) mainContent.setAttribute('aria-hidden','true');
        setTimeout(()=>{const first=bookingModal.querySelector('input,select,textarea');if(first)first.focus();},50);
        trapFocus(true);
      }
      function closeBooking(){
        bookingModal.classList.remove('active');
        if(mainContent) mainContent.removeAttribute('aria-hidden');
        trapFocus(false);
      }
      openBtns.forEach(b=>{if(b) b.addEventListener('click',function(e){e.preventDefault();openBooking();});});
      document.getElementById('booking-cancel').addEventListener('click',closeBooking);
      bookingModal.addEventListener('click',function(e){if(e.target===bookingModal)closeBooking();});
      document.addEventListener('keydown',function(e){if(e.key==='Escape')closeBooking();});

      // Simple validation helpers
      function showError(field, msg){
        let next = field.nextElementSibling;
        if(next && next.classList.contains('field-error')){ next.textContent = msg; return }
        const el = document.createElement('div'); el.className='field-error'; el.textContent=msg; field.parentNode.insertBefore(el, field.nextSibling);
      }
      function clearError(field){
        let next = field.nextElementSibling; if(next && next.classList.contains('field-error')) next.remove();
      }

      // Focus trap implementation
      let previouslyFocused = null;
      function trapFocus(enable){
        const focusable = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])';
        const modal = bookingModal;
        if(enable){
          previouslyFocused = document.activeElement;
          const nodes = modal.querySelectorAll(focusable);
          const first = nodes[0]; const last = nodes[nodes.length-1];
          modal._trapHandler = function(e){
            if(e.key === 'Tab'){
              if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
              else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
            }
          };
          modal.addEventListener('keydown', modal._trapHandler);
        } else {
          if(modal._trapHandler) modal.removeEventListener('keydown', modal._trapHandler);
          if(previouslyFocused) previouslyFocused.focus();
        }
      }

      // Form submit: validate and send
      bookingForm.addEventListener('submit', async function(e){
        e.preventDefault();
        // clear previous errors
        bookingForm.querySelectorAll('.field-error').forEach(n=>n.remove());

        const name = bookingForm.elements['name'];
        const phone = bookingForm.elements['phone'];
        const email = bookingForm.elements['email'];
        const service = bookingForm.elements['service'];
        const date = bookingForm.elements['date'];
        const note = bookingForm.elements['note'];

        let ok = true;
        if(!name.value.trim()){ showError(name,'Vypl≈àte pros√≠m jm√©no'); ok=false } else clearError(name);
        const phoneVal = phone.value.trim();
        if(!phoneVal){ showError(phone,'Vypl≈àte pros√≠m telefon'); ok=false }
        else if(!/^[0-9+ \-()]{6,20}$/.test(phoneVal)){ showError(phone,'Neplatn√© telefonn√≠ ƒç√≠slo'); ok=false } else clearError(phone);
        if(email.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)){ showError(email,'Neplatn√Ω e‚Äëmail'); ok=false } else clearError(email);
        if(!date.value){ showError(date,'Vyberte pros√≠m datum a ƒças'); ok=false } else clearError(date);

        if(!ok) return;

        const payload = {
          name: name.value.trim(), phone: phone.value.trim(), email: email.value.trim(), service: service.value, date: date.value, note: note.value.trim()
        };

        try{
          if(BOOKING_ENDPOINT){
            const res = await fetch(BOOKING_ENDPOINT, {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
            if(!res.ok) throw new Error('Chyba serveru');
            alert('Objedn√°vka byla odesl√°na. Dƒõkujeme!');
          } else {
            // mailto fallback (opens email client)
            const subject = encodeURIComponent('Nov√° rezervace - ' + payload.name);
            let body = '';
            body += 'Jm√©no: ' + payload.name + '\n';
            body += 'Telefon: ' + payload.phone + '\n';
            if(payload.email) body += 'Email: ' + payload.email + '\n';
            body += 'Slu≈æba: ' + payload.service + '\n';
            body += 'Datum/ƒças: ' + payload.date + '\n';
            if(payload.note) body += '\nPozn√°mka:\n' + payload.note + '\n';
            const mailto = 'mailto:?subject=' + subject + '&body=' + encodeURIComponent(body);
            window.location.href = mailto;
          }
          console.log('Booking data:', payload);
          bookingForm.reset();
          closeBooking();
        } catch(err){
          alert('Nepoda≈ôilo se odeslat rezervaci. Zkuste to pros√≠m pozdƒõji.');
          console.error(err);
        }
      });

      // Services horizontal scroller
      (function(){
        const wrap = document.querySelector('.services-wrap');
        if(!wrap) return;
        const row = wrap.querySelector('.services-row');
        const btnL = wrap.querySelector('.scroll-btn.left');
        const btnR = wrap.querySelector('.scroll-btn.right');
        const scrollAmount = Math.round((row.clientWidth || 600) * 0.7);
        btnL.addEventListener('click', ()=> row.scrollBy({left: -scrollAmount, behavior:'smooth'}));
        btnR.addEventListener('click', ()=> row.scrollBy({left: scrollAmount, behavior:'smooth'}));
        // keyboard support when focused
        row.addEventListener('keydown', (e)=>{
          if(e.key === 'ArrowRight'){ e.preventDefault(); row.scrollBy({left: 260, behavior:'smooth'}); }
          if(e.key === 'ArrowLeft'){ e.preventDefault(); row.scrollBy({left: -260, behavior:'smooth'}); }
        });
        // hide buttons if not scrollable
        function updateButtons(){
          if(row.scrollWidth <= row.clientWidth){ btnL.style.display = 'none'; btnR.style.display='none'; }
          else { btnL.style.display='flex'; btnR.style.display='flex'; }
        }
        window.addEventListener('resize', updateButtons);
        updateButtons();
      })();

    
  </script>
</body>
</html>
