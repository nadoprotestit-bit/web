<!DOCTYPE html>

<html lang="cs">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Body Balance ≈ò√≠ƒçany | Mas√°≈æe a p√©ƒçe o tƒõlo</title>
<meta content="Body Balance v ≈ò√≠ƒçanech ‚Äì relaxaƒçn√≠ a regeneraƒçn√≠ mas√°≈æe, lymfodren√°≈æ a p√©ƒçe o tƒõlo. Jednoduch√° online rezervace." name="description"/>
<meta content="mas√°≈æe, relaxace, sportovn√≠ mas√°≈æ, d√°rkov√© poukazy, terapie" name="keywords"/>
<link href="data:;base64,iVBORw0KGgo=" rel="icon"/>
<style>
:root{
  --bg:#0b0f19;
  --panel: rgba(255,255,255,.05);
  --text:#e8ecf5;
  --muted: rgba(232,236,245,.72);
  --line: rgba(255,255,255,.12);
  --accent:#ff4d8d;
  --accent2:#7c3aed;
  --shadow: 0 18px 60px rgba(0,0,0,.45);
  --radius:18px;
}
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(124,58,237,.35), transparent 55%),
    radial-gradient(900px 600px at 90% 15%, rgba(255,77,141,.30), transparent 55%),
    radial-gradient(900px 700px at 50% 110%, rgba(34,211,238,.12), transparent 60%),
    var(--bg);
  color:var(--text);
  line-height:1.6;
}
a{color:inherit;text-decoration:none}
.container{max-width:1180px;margin:0 auto;padding:22px}

nav{
  position:sticky; top:0; z-index:50;
  backdrop-filter: blur(14px);
  background: linear-gradient(to bottom, rgba(11,15,25,.82), rgba(11,15,25,.35));
  border-bottom:1px solid var(--line);
}
.navwrap{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
}
.brand{display:flex;align-items:center;gap:12px}
.brand .logo{
  width:40px;height:40px;border-radius:14px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 12px 40px rgba(124,58,237,.25);
}
.brand h2{margin:0;font-size:16px;letter-spacing:.2px}
.links{display:flex;flex-wrap:wrap;align-items:center;gap:10px}
.links a{
  padding:10px 12px;border-radius:12px;
  color:var(--muted);
  border:1px solid transparent;
}
.links a:hover{color:var(--text); border-color:var(--line); background:rgba(255,255,255,.04)}
.links a#open-book{
  color:#0b0f19;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border:none;
  box-shadow: 0 12px 40px rgba(255,77,141,.18);
}

header.hero{padding:54px 0 18px}
.hero-content{
  display:grid;
  grid-template-columns: 1.15fr .85fr;
  gap:16px;
  align-items:center;
}
.hero-left{
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border:1px solid var(--line);
  border-radius: calc(var(--radius) + 6px);
  padding:26px;
  box-shadow: var(--shadow);
  position:relative;
  overflow:hidden;
}
.hero-left:before{
  content:"";
  position:absolute; inset:-2px;
  background: radial-gradient(600px 300px at 20% 10%, rgba(255,77,141,.35), transparent 55%),
              radial-gradient(500px 260px at 80% 20%, rgba(124,58,237,.28), transparent 55%);
  opacity:.55;
  pointer-events:none;
}
.hero-left > *{position:relative}
.hero-left p.muted:first-child{
  display:inline-flex;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.04);
  width:fit-content;
  margin:0 0 10px;
}
.hero-left h1{margin:10px 0 10px;font-size:46px;line-height:1.08;letter-spacing:-.8px}
.hero-left p.muted{color:var(--muted);margin:0;max-width:66ch}

.hero-left .cta{
  display:inline-flex;align-items:center;justify-content:center;
  padding:12px 14px;margin-top:14px;
  border-radius:14px;
  font-weight:700;
  border:1px solid var(--line);
  background: rgba(255,255,255,.04);
  transition: transform .12s ease, background .12s ease;
}
.hero-left .cta:hover{transform: translateY(-1px); background: rgba(255,255,255,.06)}
.hero-left .cta#cta-book{
  border:none;
  color:#0b0f19;
  background: linear-gradient(135deg, var(--accent), var(--accent2)) !important;
  margin-left:10px;
}

.hero-right{
  border-radius: calc(var(--radius) + 6px);
  border:1px solid var(--line);
  overflow:hidden;
  box-shadow: var(--shadow);
}
.hero-image{width:100%;height:100%;max-height:360px;object-fit:cover;display:block;filter:saturate(1.05) contrast(1.03)}

main{padding:6px 0 44px}
section{margin-top:26px}
section h2{margin:0;font-size:26px;letter-spacing:-.2px}
.muted{color:var(--muted)}

.services-row, .pricing, .testimonials{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:12px;
  margin-top:12px;
}
.card{
  background: rgba(255,255,255,.05);
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding:18px;
}
.service-icon,.price-icon{font-size:26px;margin-bottom:10px}
.service h3,.price h4{margin:0 0 6px}
.card p{margin:0}

.img-row{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-top:14px}
.img-card{margin:0}
.img-card img{width:100%;height:170px;object-fit:cover;border-radius:var(--radius);border:1px solid var(--line)}
.img-card figcaption{margin-top:8px;color:var(--muted);font-size:13px}

.hours-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:12px;
  margin-top:12px;
}
.hours-card{
  background: rgba(255,255,255,.05);
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding:16px;
}
.hours-title{margin:0 0 10px}
.day{color:var(--muted)}
.time strong{color:var(--text)}

.contact-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
  margin-top:12px;
}
.contact-image{
  border-radius: var(--radius);
  border:1px solid var(--line);
  overflow:hidden;
  background: rgba(255,255,255,.04);
}
.contact-image iframe, .contact-image img{width:100%;height:100%;min-height:320px;border:0;display:block}

.phone-link{color:var(--text);text-decoration:underline;text-underline-offset:3px}

footer{border-top:1px solid var(--line);padding:18px 0;margin-top:28px;color:var(--muted);font-size:14px}

.modal{
  position:fixed; inset:0;
  display:none;
  place-items:center;
  background: rgba(0,0,0,.62);
  backdrop-filter: blur(8px);
  z-index:100;
  padding:18px;
}
.modal.active{display:grid}
.box{
  width:min(560px, calc(100vw - 28px));
  background: rgba(15,23,42,.92);
  border:1px solid var(--line);
  border-radius: calc(var(--radius) + 6px);
  box-shadow: var(--shadow);
  padding:18px;
}
.box h3{margin:0 0 10px}
.booking-form label{display:block;margin-top:12px;color:var(--muted);font-weight:700;font-size:13px}
.booking-form input,.booking-form select,.booking-form textarea{
  width:100%;
  margin-top:7px;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.04);
  color:var(--text);
  outline:none;
}
.booking-form textarea{min-height:92px;resize:vertical}
.booking-form small.muted{display:block;margin-top:8px}
.booking-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end;margin-top:14px}

.btn-secondary{
  display:inline-flex;align-items:center;justify-content:center;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background: transparent;
  color:var(--text);
  font-weight:700;
  cursor:pointer;
}
.btn-secondary:hover{background: rgba(255,255,255,.06)}
.field-error{color:#ff93b6;margin-top:6px;font-size:13px}

.toast{
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
  background: rgba(15,23,42,.96);
  border:1px solid var(--line);
  padding:12px 14px;
  border-radius: 14px;
  color:var(--text);
  display:none;
  box-shadow: var(--shadow);
  z-index:120;
}
.toast.show{display:block}

@media (max-width: 920px){
  .hero-content{grid-template-columns:1fr}
  .hero-left h1{font-size:38px}
  .services-row,.pricing,.testimonials,.hours-grid,.contact-grid,.img-row{grid-template-columns:1fr}
  .links{display:none}
}


/* --- Slider (Slu≈æby / Cen√≠k) --- */
.services-wrap, .pricing-wrap{position:relative}
.services-row, .pricing{
  display:flex !important;
  gap:12px;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  padding:2px 2px 10px;
}
.services-row::-webkit-scrollbar, .pricing::-webkit-scrollbar{height:8px}
.services-row::-webkit-scrollbar-thumb, .pricing::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.14);
  border-radius:999px;
}
.services-row > .card, .pricing > .card{
  scroll-snap-align:start;
  min-width: 280px;
  flex: 0 0 auto;
}
.scroll-btn{
  position:absolute;
  top:50%;
  transform: translateY(-50%);
  width:40px;height:40px;
  border-radius:999px;
  border:1px solid var(--line);
  background: rgba(15,23,42,.78);
  color: var(--text);
  cursor:pointer;
  display:grid;
  place-items:center;
  box-shadow: var(--shadow);
}
.scroll-btn.left{left:-10px}
.scroll-btn.right{right:-10px}
.scroll-btn:hover{background: rgba(255,255,255,.10)}
@media (max-width:920px){
  .scroll-btn{display:none}
  .services-row > .card, .pricing > .card{min-width: 78vw}
}

/* --- Contact layout fixes --- */
img.contact-image{
  width:100%;
  height: 220px;
  object-fit: cover;
  border-radius: var(--radius);
  border:1px solid var(--line);
  display:block;
  margin-top:12px;
}
.contact-details{
  margin-top:14px;
  display:grid;
  gap:10px;
}
.contact-row{
  display:grid;
  grid-template-columns: 110px 1fr;
  gap:12px;
  padding:12px 14px;
  border-radius: 14px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.04);
}
.contact-label{color:var(--muted);font-weight:700}
.contact-value{color:var(--text)}
.contact-value a.phone-link{color:var(--text);text-decoration:underline;text-underline-offset:3px}

/* --- Opening hours card centered + smaller --- */
#oteviraci-doba .hours-card{
  max-width: 560px;
  margin: 0 auto;
}

/* --- Hero full-width centered (no image) --- */
.hero-content{
  grid-template-columns: 1fr !important;
}
header.hero{padding:64px 0 22px}
.hero-left{
  max-width: 860px;
  margin: 0 auto;
  text-align: center;
}
.hero-left p.muted:first-child{margin-left:auto;margin-right:auto}
.hero-left .cta{margin-top:16px}
.hero-left .cta#cta-book{margin-left:10px}

/* --- Slider arrows alignment (Slu≈æby) --- */
.services-wrap{position:relative}
.services-wrap .scroll-btn{
  top: 50%;
}
.services-row{
  padding-bottom: 2px !important;
  align-items: stretch;
}

/* --- Contact: no extra framed rows, just spacing --- */
.contact-row{
  border: none !important;
  background: transparent !important;
  padding: 0 !important;
}
.contact-details{gap:12px}
.contact-label{font-weight:700}
.contact-value{color:var(--text)}
.contact-row + .contact-row{margin-top:10px}

/* --- Opening hours: center text + highlight weekend --- */
#oteviraci-doba .hours-card{
  text-align:center;
}
#oteviraci-doba .hours-card .hours-title{margin:0 0 12px}
#oteviraci-doba .hours-card .day{display:block;font-weight:700;color:var(--muted);margin-bottom:6px}
#oteviraci-doba .hours-card .time{font-size:18px}
#oteviraci-doba .hours-card.weekend{
  border-color: rgba(255,77,141,.55);
  background: radial-gradient(500px 260px at 30% 10%, rgba(255,77,141,.18), transparent 55%),
              rgba(255,255,255,.05);
}

/* --- Theme toggle --- */
.theme-toggle{
  position: fixed;
  right: 18px;
  bottom: 18px;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(15,23,42,.80);
  color: var(--text);
  box-shadow: var(--shadow);
  cursor: pointer;
  z-index: 130;
}
.theme-toggle:hover{background: rgba(255,255,255,.10)}
body.theme-light{
  --bg:#f7f8fc;
  --panel: rgba(11,15,25,.04);
  --text:#0b0f19;
  --muted: rgba(11,15,25,.65);
  --line: rgba(11,15,25,.14);
  --shadow: 0 18px 60px rgba(0,0,0,.18);
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(124,58,237,.16), transparent 55%),
    radial-gradient(900px 600px at 90% 15%, rgba(255,77,141,.14), transparent 55%),
    radial-gradient(900px 700px at 50% 110%, rgba(34,211,238,.08), transparent 60%),
    var(--bg);
}
body.theme-light nav{
  background: linear-gradient(to bottom, rgba(247,248,252,.92), rgba(247,248,252,.70));
}
body.theme-light .hero-left:before{opacity:.22}
body.theme-light .card,
body.theme-light .hero-left,
body.theme-light .hours-card,
body.theme-light .box{
  background: rgba(11,15,25,.03);
}
body.theme-light .links a#open-book{color:#fff}
body.theme-light .theme-toggle{background: rgba(247,248,252,.92)}


/* --- Hours: highlight weekend rows --- */
.hours-grid .day.weekend, .hours-grid .time.weekend{
  color: var(--text);
}
.hours-grid .day.weekend{
  font-weight: 800;
}
.hours-grid .time.weekend{
  border: 1px solid rgba(255,77,141,.35);
  background: radial-gradient(500px 260px at 30% 10%, rgba(255,77,141,.16), transparent 55%),
              rgba(255,255,255,.04);
  border-radius: 12px;
  padding: 8px 10px;
}

/* --- Footer centered --- */
footer.footer-center{ text-align:center; }
footer.footer-center .container{ display:flex; justify-content:center; }




/* === Slider (Slu≈æby / Cen√≠k) ‚Äì reliable === */
.services-wrap, .pricing-wrap{position:relative;margin-top:12px}
.services-row, .pricing{
  display:flex !important;
  gap:12px;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  padding:2px 2px 10px;
}
.services-row > .card, .pricing > .card{
  scroll-snap-align:start;
  min-width:280px;
  flex:0 0 auto;
}
.services-row::-webkit-scrollbar, .pricing::-webkit-scrollbar{height:8px}
.services-row::-webkit-scrollbar-thumb, .pricing::-webkit-scrollbar-thumb{background: rgba(255,255,255,.14); border-radius:999px}

.scroll-btn{
  position:absolute;
  left:auto; right:auto;
  width:40px;height:40px;
  border-radius:999px;
  border:1px solid var(--line);
  background: rgba(15,23,42,.78);
  color: var(--text);
  cursor:pointer;
  display:grid;
  place-items:center;
  box-shadow: var(--shadow);
  z-index: 5;
}
.scroll-btn.left{left:-10px}
.scroll-btn.right{right:-10px}
.scroll-btn:hover{background: rgba(255,255,255,.10)}
@media (max-width:920px){
  .scroll-btn{display:none}
  .services-row > .card, .pricing > .card{min-width:78vw}
}

/* === Otev√≠rac√≠ doba ‚Äì v√≠kend r≈Ø≈æovƒõ (jako na obr√°zku) === */
.hours-grid .day.weekend,
.hours-grid .time.weekend{
  color: var(--accent) !important;
  font-weight: 800;
}
.hours-grid .time.weekend{
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
}

/* === Theme toggle + light theme === */
.theme-toggle{
  position: fixed;
  right: 18px;
  bottom: 18px;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(15,23,42,.80);
  color: var(--text);
  box-shadow: var(--shadow);
  cursor: pointer;
  z-index: 130;
}
.theme-toggle:hover{background: rgba(255,255,255,.10)}

body.theme-light{
  --bg:#f7f8fc;
  --panel: rgba(11,15,25,.04);
  --text:#0b0f19;
  --muted: rgba(11,15,25,.65);
  --line: rgba(11,15,25,.14);
  --shadow: 0 18px 60px rgba(0,0,0,.18);
  background:
    radial-gradient(1200px 700px at 10% 10%, rgba(124,58,237,.16), transparent 55%),
    radial-gradient(900px 600px at 90% 15%, rgba(255,77,141,.14), transparent 55%),
    radial-gradient(900px 700px at 50% 110%, rgba(34,211,238,.08), transparent 60%),
    var(--bg);
}
body.theme-light nav{
  background: linear-gradient(to bottom, rgba(247,248,252,.92), rgba(247,248,252,.70));
}
body.theme-light .hero-left:before{opacity:.22}
body.theme-light .card,
body.theme-light .hero-left,
body.theme-light .hours-card,
body.theme-light .box{
  background: rgba(11,15,25,.03);
}
body.theme-light .links a#open-book{color:#fff}
body.theme-light .theme-toggle{background: rgba(247,248,252,.92)}

/* === Jak to funguje === */
.steps{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin-top:14px}
.step{position:relative;padding-top:18px}
.step-badge{
  position:absolute;top:14px;right:14px;
  width:34px;height:34px;border-radius:999px;
  display:grid;place-items:center;
  border:1px solid var(--line);
  background: rgba(255,255,255,.06);
  font-weight:800;
}
.how-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
@media (max-width:900px){.steps{grid-template-columns:1fr}}


/* === Booking modal layout fix === */
#booking-modal .modal-card{
  max-height: 86vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
#booking-modal .modal-card form{
  display:flex;
  flex-direction:column;
  min-height:0;
}
#booking-modal .booking-fields{
  overflow:auto;
  padding-right: 4px;
  min-height:0;
}
#booking-modal .booking-actions{
  position: sticky;
  bottom: 0;
  display:flex;
  gap:10px;
  justify-content:flex-end;
  padding: 12px 0 0;
  margin-top: 10px;
  background: linear-gradient(to top, rgba(10,12,18,.92), rgba(10,12,18,.0));
  backdrop-filter: blur(6px);
}
#booking-modal .booking-actions .btn{min-width: 140px;}
#booking-modal textarea{min-height:120px;max-height:220px;}
/* Hide admin-only controls in public UI */
.admin-only{display:none !important;}

/* ===== Mobile-only navigation (isolated; desktop unchanged) ===== */
.hamburger{display:none; width:44px;height:44px;border-radius:14px;border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06); backdrop-filter: blur(8px);
  align-items:center;justify-content:center; flex-direction:column; gap:6px; padding:0; cursor:pointer;
}
.hamburger span{display:block;width:18px;height:2px;background:rgba(255,255,255,.85);border-radius:99px;}
.hamburger:active{transform:scale(.98);}
.mobile-nav{display:none;}
body.is-mobile .links{display:none !important;}
body.is-mobile .hamburger{display:flex;}
body.is-mobile .mobile-nav{display:block; position:fixed; inset:0; z-index:9999;
  background:rgba(0,0,0,.35); backdrop-filter: blur(2px);
  opacity:0; pointer-events:none; transition:opacity .18s ease;
}
body.is-mobile.mobile-nav-open .mobile-nav{opacity:1; pointer-events:auto;}
.mobile-nav-card{position:absolute; left:12px; right:12px; top:12px;
  border-radius:20px; border:1px solid rgba(255,255,255,.14);
  background:rgba(16,20,34,.86); box-shadow:0 18px 60px rgba(0,0,0,.45);
  overflow:hidden;
}
body.theme-light .mobile-nav-card{background:rgba(255,255,255,.92); border-color:rgba(0,0,0,.10);}
.mobile-nav-head{display:flex; align-items:center; justify-content:space-between;
  padding:14px 14px; border-bottom:1px solid rgba(255,255,255,.10);
}
body.theme-light .mobile-nav-head{border-bottom-color:rgba(0,0,0,.08);}
.mobile-nav-title{font-weight:800; letter-spacing:.2px;}
.mobile-nav-close{width:38px;height:38px;border-radius:14px;border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.06); color:inherit; cursor:pointer;
}
body.theme-light .mobile-nav-close{border-color:rgba(0,0,0,.12); background:rgba(0,0,0,.04);}
.mobile-nav-links{display:grid; gap:10px; padding:14px;}
.mobile-nav-links a{display:flex; align-items:center; justify-content:space-between;
  padding:12px 14px; border-radius:16px; text-decoration:none; color:inherit;
  border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.04);
}
body.theme-light .mobile-nav-links a{border-color:rgba(0,0,0,.10); background:rgba(0,0,0,.03);}
.mobile-nav-links a:active{transform:scale(.99);}
.mobile-nav-cta{border-color:rgba(255,105,180,.30) !important;
  background:linear-gradient(135deg, rgba(255,105,180,.26), rgba(168,85,247,.22)) !important;
}

/* Keep desktop spacing the same; on mobile give navwrap more room */
body.is-mobile .navwrap{padding-inline:14px;}
body.is-mobile .brand h2{font-size:18px;}



/* === Light theme visibility fixes (desktop + mobile) === */
body.theme-light .hamburger{ background: rgba(255,255,255,.92); border: 1px solid rgba(11,15,25,.14); }
body.theme-light .hamburger span{ background: rgba(11,15,25,.86); }

/* Make panels a bit whiter in light theme (esp. mobile) */
body.theme-light{ --bg:#ffffff; }
body.theme-light nav{ background: linear-gradient(to bottom, rgba(255,255,255,.92), rgba(255,255,255,.72)); }
body.theme-light .card,
body.theme-light .hero-left,
body.theme-light .hours-card,
body.theme-light .box{ background: rgba(11,15,25,.02); }

/* Ensure secondary buttons/controls are visible on light theme */
body.theme-light .btn-secondary{ background: rgba(11,15,25,.04); }
body.theme-light .btn-secondary:hover{ background: rgba(11,15,25,.06); }

/* Slider arrows in light theme */
body.theme-light .carousel-btn{
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(11,15,25,.14);
}
body.theme-light .carousel-btn:hover{ background: rgba(255,255,255,1); }

/* Mobile menu overlay in light theme */
body.theme-light body.is-mobile .mobile-nav{ background: rgba(255,255,255,.96); }



/* === Subtle animations (safe) === */
.card, .btn-secondary, #open-book, .carousel-btn, .theme-toggle{
  transition: transform .18s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease, opacity .18s ease;
}
.card:hover{ transform: translateY(-2px); }
#open-book:hover{ transform: translateY(-1px); box-shadow: 0 16px 50px rgba(255,77,141,.22); }
.btn-secondary:hover{ transform: translateY(-1px); }
.carousel-btn:hover{ transform: translateY(-1px); }

/* Mobile menu animation */
body.is-mobile .mobile-nav{
  transition: opacity .2s ease, transform .2s ease;
  opacity: 0;
  transform: translateY(-6px);
}
body.is-mobile.nav-open .mobile-nav{
  opacity: 1;
  transform: translateY(0);
}



/* === Booking modal buttons: consistent + readable in light theme === */
.booking-actions .btn-secondary,
.booking-actions .cta{
  margin-top: 0 !important; /* prevent CTA looking misaligned */
}

.booking-actions .cta{
  background: linear-gradient(135deg, rgba(255,77,141,.92), rgba(124,58,237,.92));
  border: 1px solid rgba(255,255,255,.18);
  color: #0b0f19;
  box-shadow: 0 14px 40px rgba(124,58,237,.18);
}

.booking-actions .cta:hover{
  transform: translateY(-1px);
  box-shadow: 0 18px 50px rgba(124,58,237,.22);
}

body.theme-light .booking-actions .cta{
  color: #0b0f19;
  background: linear-gradient(135deg, rgba(255,77,141,.95), rgba(124,58,237,.95));
  border: 1px solid rgba(11,15,25,.08);
  box-shadow: 0 16px 44px rgba(11,15,25,.10);
}

body.theme-light .booking-actions .btn-secondary{
  background: rgba(11,15,25,.04);
  border: 1px solid rgba(11,15,25,.12);
  color: rgba(11,15,25,.86);
}

body.theme-light .booking-actions .btn-secondary:hover{
  background: rgba(11,15,25,.06);
}

/* Mobile: full-width buttons for easier tapping */
body.is-mobile .booking-actions{
  flex-direction: column !important;
  align-items: stretch !important;
}

body.is-mobile .booking-actions .btn-secondary,
body.is-mobile .booking-actions .cta{
  width: 100% !important;
}



/* === FINAL: Booking modal button sizing + consistent corners === */
.booking-actions .btn-secondary,
.booking-actions .cta{
  border-radius: 14px !important;
  padding: 12px 16px !important;
  min-height: 44px;
  font-size: 15px;
  line-height: 1.1;
}

@media (min-width: 901px){
  .booking-actions .btn-secondary,
  .booking-actions .cta{
    padding: 12px 18px !important;
    min-height: 46px;
    font-size: 15px;
  }
}

body.is-mobile .booking-actions .btn-secondary,
body.is-mobile .booking-actions .cta{
  padding: 14px 16px !important;
  min-height: 50px;
  font-size: 16px;
}



/* === Light theme: reservation modal bottom area refinement === */
body.theme-light .modal-card{
  background: #ffffff;
}

body.theme-light .booking-actions{
  background: rgba(11,15,25,.02);
  border-top: 1px solid rgba(11,15,25,.08);
  padding-top: 14px;
}

/* Improve visibility of Cancel button in light theme */
body.theme-light .booking-actions .btn-secondary{
  background: rgba(11,15,25,.06);
  border: 1px solid rgba(11,15,25,.18);
  color: rgba(11,15,25,.9);
}

body.theme-light .booking-actions .btn-secondary:hover{
  background: rgba(11,15,25,.10);
  border-color: rgba(11,15,25,.25);
}

</style>
</head>
<body>
<nav class="top">
<div class="navwrap container">
<div class="brand">
<h2>Body Balance</h2>
</div>
<div class="links"><a href="#sluzby">Slu≈æby</a><a href="#cenik">Cen√≠k</a><a href="#kontakt">Kontakt</a><a href="#reference">Hodnocen√≠</a><a href="#oteviraci-doba">Otev√≠rac√≠ doba</a><a href="#jak-to-funguje">Jak to funguje</a><a href="#kontakt" id="open-book">Rezervace</a></div>

<button class="hamburger" id="mobileHamburger" aria-label="Otev≈ô√≠t menu" aria-expanded="false" aria-controls="mobileNav">
  <span></span><span></span><span></span>
</button>
<div class="mobile-nav" id="mobileNav" aria-hidden="true">
  <div class="mobile-nav-card">
    <div class="mobile-nav-head">
      <div class="mobile-nav-title">Menu</div>
      <button class="mobile-nav-close" id="mobileNavClose" aria-label="Zav≈ô√≠t menu">‚úï</button>
    </div>
    <div class="mobile-nav-links">
      <a href="#sluzby">Slu≈æby</a>
      <a href="#cenik">Cen√≠k</a>
      <a href="#kontakt">Kontakt</a>
      <a href="#reference">Hodnocen√≠</a>
      <a href="#oteviraci-doba">Otev√≠rac√≠ doba</a>
      <a href="#jak-to-funguje">Jak to funguje</a>
      <a href="#" data-open-booking="1" class="mobile-nav-cta">Rezervace</a>
    </div>
  </div>
</div>

</div>
</nav>
<header class="hero" role="banner">
<div class="container hero-content">
<div class="hero-left">
<p class="muted">Mas√°≈æe ‚Ä¢ Regenerace ‚Ä¢ P√©ƒçe o tƒõlo v ≈ò√≠ƒçanech</p>
<h1 style="">Body Balance ≈ò√≠ƒçany</h1>
<p class="muted">P≈ô√≠jemn√© prost≈ôed√≠, f√©rov√© ceny a online rezervace. Vyberte slu≈æbu a term√≠n bƒõhem chvilky.</p>
<div style="margin-top:18px">
<a class="cta" href="#cenik">Prohl√©dnout cen√≠k</a>
<a class="cta" data-open-booking="1" href="#" id="cta-book" style="background:rgba(255,255,255,0.2);backdrop-filter:blur(4px);margin-left:10px;border:2px solid rgba(255,255,255,0.3)">Rezervovat term√≠n online</a>
</div>
</div>
</div>
</header>
<main class="container">
<section id="sluzby" style="margin-top:28px">
<h2>Slu≈æby</h2><p class="muted">Vyberte si slu≈æbu podle toho, co pr√°vƒõ pot≈ôebujete.</p>
<div class="services-wrap" style="margin-top:12px;position:relative">
<button aria-label="Posunout vlevo" class="scroll-btn left">‚óÄ</button>
<div class="services-row" tabindex="0">
<div class="card service">
<div class="service-icon">üíÜ</div>
<h3>Mas√°≈æ zad ‚Äî 60 min</h3>
<p class="muted">Zamƒõ≈ôen√° na uvolnƒõn√≠ zadn√≠ch sval≈Ø a bolesti</p>
</div>
<div class="card service">
<div class="service-icon">üßò</div>
<h3>Celotƒõlov√° mas√°≈æ ‚Äî 120 min</h3>
<p class="muted">Komplexn√≠ mas√°≈æ cel√©ho tƒõla pro hlubokou regeneraci</p>
</div>
<div class="card service">
<div class="service-icon">‚ú®</div>
<h3>Mas√°≈æ ≈°√≠je (l√≠mcov√° oblast) ‚Äî 40 min</h3>
<p class="muted">Zamƒõ≈ôeno na krƒçn√≠ p√°te≈ô a uvolnƒõn√≠ napƒõt√≠</p>
</div>
<div class="card service">
<div class="service-icon">üë∂</div>
<h3>Dƒõtsk√° mas√°≈æ ‚Äî 30‚Äì40 min</h3>
<p class="muted">Jemn√° mas√°≈æ vhodn√° pro dƒõti</p>
</div>
<div class="card service">
<div class="service-icon">üåä</div>
<h3>Lymfodren√°≈æ (p≈ô√≠stroj 3v1) ‚Äî 30 min</h3>
<p class="muted">Profesion√°ln√≠ lymfodren√°≈æn√≠ p≈ô√≠stroj 3v1 ‚Äî InfraSauna &amp; EMS</p>
</div>
</div>
<button aria-label="Posunout vpravo" class="scroll-btn right">‚ñ∂</button>
<div class="img-row"><figure class="img-card"><img alt="P√©ƒçe o tƒõlo" loading="lazy" src="https://images.unsplash.com/photo-1556228578-0d85b1a4d571?auto=format&amp;fit=crop&amp;w=1400&amp;q=60"/><figcaption>P√©ƒçe o tƒõlo</figcaption></figure><figure class="img-card"><img alt="Uvolnƒõn√≠" loading="lazy" src="https://images.unsplash.com/photo-1596178060671-7a80dc8059ea?auto=format&amp;fit=crop&amp;w=1400&amp;q=60"/><figcaption>Uvolnƒõn√≠</figcaption></figure><figure class="img-card"><img alt="Regenerace" loading="lazy" src="https://images.unsplash.com/photo-1522327646852-4e28586a40dd?auto=format&amp;fit=crop&amp;w=1400&amp;q=60"/><figcaption>Regenerace</figcaption></figure></div></div>
</section>
<section id="cenik" style="margin-top:28px">
<h2>Cen√≠k</h2>
<div class="pricing-wrap" style="margin-top:12px;position:relative"><button aria-label="Posunout vlevo" class="scroll-btn left">‚óÄ</button><div class="pricing">
<div class="card price">
<div class="price-icon">üíÜ</div>
<h4>Mas√°≈æ zad ‚Äî 60 min</h4>
<p><strong>600 Kƒç</strong></p>
</div>
<div class="card price">
<div class="price-icon">üßò</div>
<h4>Celotƒõlov√° mas√°≈æ ‚Äî 120 min</h4>
<p><strong>1100 Kƒç</strong></p>
</div>
<div class="card price">
<div class="price-icon">‚ú®</div>
<h4>Mas√°≈æ ≈°√≠je (l√≠mcov√° oblast) ‚Äî 40 min</h4>
<p><strong>400 Kƒç</strong></p>
</div>
<div class="card price">
<div class="price-icon">üë∂</div>
<h4>Dƒõtsk√° mas√°≈æ ‚Äî 30‚Äì40 min</h4>
<p><strong>300‚Äì400 Kƒç</strong></p>
</div>
<div class="card price">
<div class="price-icon">üåä</div>
<h4>Lymfodren√°≈æ (p≈ô√≠stroj 3v1) ‚Äî 30 min</h4>
<p><strong>400 Kƒç</strong></p>
</div>
</div><button aria-label="Posunout vpravo" class="scroll-btn right">‚ñ∂</button></div>
</section><section id="jak-to-funguje"><h2>Jak to funguje</h2><p class="muted">Objedn√°n√≠ je rychl√©. Staƒç√≠ vybrat slu≈æbu, datum a ƒças ‚Äî potvrzen√≠ uvid√≠te hned.</p><div class="steps"><div class="card step"><div class="step-badge">1</div><h3>Vyberte slu≈æbu</h3><p class="muted">Zvolte mas√°≈æ a d√©lku podle va≈°ich pot≈ôeb.</p></div><div class="card step"><div class="step-badge">2</div><h3>Vyberte datum a ƒças</h3><p class="muted">Uvid√≠te jen voln√© term√≠ny v otev√≠rac√≠ dobƒõ.</p></div><div class="card step"><div class="step-badge">3</div><h3>Potvrƒète rezervaci</h3><p class="muted">Vypl≈àte jm√©no a telefon ‚Äî rezervace se ulo≈æ√≠ a term√≠n se zablokuje.</p></div></div></section>
<section id="reference"><h2>Hodnocen√≠ z√°kazn√≠k≈Ø</h2><p class="muted">Kr√°tk√© ohlasy od klient≈Ø ‚Äì pro lep≈°√≠ p≈ôedstavu, jak to u n√°s prob√≠h√°.</p><div class="testimonials"><div class="card testimonial"><p>‚ÄûP≈ô√≠jemn√° atmosf√©ra a hlavnƒõ v√Ωsledek. Po mas√°≈æi zad jsem c√≠til √∫levu u≈æ ten den.‚Äú</p><p class="muted">‚Äî Petr, ≈ò√≠ƒçany</p></div><div class="card testimonial"><p>‚ÄûOnline rezervace je top. Vybrala jsem si term√≠n za minutku a v≈°e sedƒõlo.‚Äú</p><p class="muted">‚Äî Jana, klientka</p></div><div class="card testimonial"><p>‚Äûƒåisto, klid a profesion√°ln√≠ p≈ô√≠stup. Doporuƒçuju i jako pravidelnou regeneraci.‚Äú</p><p class="muted">‚Äî Martin, klient</p></div></div></section><section id="kontakt" style="margin-top:28px">
<h2>Kontakt</h2>
<div class="contact-grid" style="margin-top:12px">
<div>
<div class="card">
<h3>Kontakt</h3>
<img alt="Mas√°≈æn√≠ sal√≥n interi√©r" class="contact-image" loading="lazy" src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?auto=format&amp;fit=crop&amp;w=1200&amp;q=70"/><div class="contact-details"><div class="contact-row"><div class="contact-label">Telefon</div><div class="contact-value"><a class="phone-link" href="tel:+420775436270">+420 775 436 270</a></div></div><div class="contact-row"><div class="contact-label">E‚Äëmail</div><div class="contact-value">masaze@firma.cz</div></div><div class="contact-row"><div class="contact-label">Adresa</div><div class="contact-value">ƒåernokosteleck√° 526/55a, 251 01 ≈ò√≠ƒçany u Prahy</div></div></div>
</div>
</div>
<div>
<div class="card">
<h3>Mapa</h3>
<iframe height="300" loading="lazy" src="https://www.google.com/maps?q=Cernokostelecka+526%2F55a+251+01+Ricany+u+Prahy&amp;output=embed" style="border:0;border-radius:8px" width="100%"></iframe>
</div>
</div>
</div>
</section>
</main>
<!-- Opening hours (moved to page end) -->
<div class="container">
<section id="oteviraci-doba" style="margin-top:28px">
<div class="card hours-card">
<h3 class="hours-title">Otev√≠rac√≠ doba</h3>
<div class="hours-grid">
<div class="day">Pondƒõl√≠</div><div class="time">17:00 ‚Äì 19:30</div>
<div class="day">√öter√Ω</div><div class="time">17:00 ‚Äì 19:30</div>
<div class="day">St≈ôeda</div><div class="time">17:00 ‚Äì 19:30</div>
<div class="day">ƒåtvrtek</div><div class="time">17:00 ‚Äì 19:30</div>
<div class="day">P√°tek</div><div class="time">17:00 ‚Äì 19:30</div>
<div class="day weekend">Sobota</div><div class="time weekend">11:00 ‚Äì 19:00</div>
<div class="day weekend">Nedƒõle</div><div class="time weekend">11:00 ‚Äì 19:00</div>
</div>
</div>
</section>
</div>
<footer class="footer-center">
<div class="container">
<p>¬© 2026 Mas√°≈æn√≠ sal√≥n Body Balance. <span class="muted">V≈°echny pr√°va vyhrazena.</span></p>
<p class="muted">Mal√© podnik√°n√≠ ‚Äî velk√° p√©ƒçe.</p>
</div>
</footer>
<!-- Booking Modal -->
<div aria-labelledby="booking-title" aria-modal="true" class="modal" id="booking-modal" role="dialog">
<div class="box" role="document">
<h3 id="booking-title">Objedn√°vka / Rezervace</h3>
<form class="booking-form" id="booking-form">













<div class="booking-fields"><label for="b-name">Jm√©no a p≈ô√≠jmen√≠</label><input id="b-name" name="name" placeholder="Va≈°e jm√©no" required="" type="text"/><label for="b-phone">Telefon</label><input id="b-phone" name="phone" placeholder="420 123 456 789" required="" type="tel"/><label for="b-email">Email</label><input id="b-email" name="email" placeholder="email@domena.cz" type="email"/><label for="b-service">Slu≈æba</label><select id="b-service" name="service">
<option value="masaz-zad">Mas√°≈æ zad ‚Äî 60 min</option>
<option value="celotelova">Celotƒõlov√° mas√°≈æ ‚Äî 120 min</option>
<option value="masaz-sije">Mas√°≈æ ≈°√≠je (l√≠mcov√° oblast) ‚Äî 40 min</option>
<option value="detska">Dƒõtsk√° mas√°≈æ ‚Äî 30‚Äì40 min</option>
<option value="lymfodrenaz">Lymfodren√°≈æ (p≈ô√≠stroj 3v1) ‚Äî 30 min</option>
</select><label for="b-date">Preferovan√© datum / ƒças</label><input id="b-date" name="date" required="" type="date"/><select id="b-time" name="time" required="required"><option value="">Vyberte ƒças</option></select><small class="muted">ƒåasy se zobraz√≠ podle otev√≠rac√≠ doby a d√©lky slu≈æby.</small><label for="b-note">Pozn√°mka</label><textarea id="b-note" name="note" placeholder="Specifikujte pros√≠m p≈ô√≠padn√© zdravotn√≠ omezen√≠ nebo p≈ô√°n√≠" rows="3"></textarea><div class="booking-actions">


</div></div><div class="booking-actions"><button class="btn-secondary admin-only" id="download-csv" type="button">St√°hnout CSV</button><button class="btn-secondary" id="booking-cancel" type="button">Zru≈°it</button><button class="cta" type="submit">Odeslat objedn√°vku</button></div></form>
</div>
</div>
<script>// =========================
// Body Balance ‚Äì UI scripts
// =========================
window.addEventListener('DOMContentLoaded', () => {
  // ---------- Helpers ----------
  const $  = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));


  // ---------- Mobile detect (only adds class; desktop untouched) ----------
  const uaMobile = (navigator.userAgentData && navigator.userAgentData.mobile) ||
                   /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  if (uaMobile) document.body.classList.add('is-mobile');

  // ---------- Mobile menu (only works when body has is-mobile) ----------
  const hamburger = $('#mobileHamburger');
  const mobileNav = $('#mobileNav');
  const mobileClose = $('#mobileNavClose');

  const closeMobileNav = () => {
    document.body.classList.remove('mobile-nav-open');
    hamburger?.setAttribute('aria-expanded','false');
    mobileNav?.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
  };
  const openMobileNav = () => {
    document.body.classList.add('mobile-nav-open');
    hamburger?.setAttribute('aria-expanded','true');
    mobileNav?.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
  };

  if (hamburger && mobileNav && document.body.classList.contains('is-mobile')) {
    hamburger.addEventListener('click', () => {
      const isOpen = hamburger.getAttribute('aria-expanded') === 'true';
      isOpen ? closeMobileNav() : openMobileNav();
    }, {passive:true});

    mobileClose?.addEventListener('click', closeMobileNav, {passive:true});

    // close on backdrop tap
    mobileNav.addEventListener('click', (e) => {
      if (e.target === mobileNav) closeMobileNav();
    });

    // close on link click + support booking CTA
    mobileNav.querySelectorAll('a').forEach((a) => {
      a.addEventListener('click', (e) => {
        const openBooking = a.getAttribute('data-open-booking');
        const href = a.getAttribute('href') || '';
        closeMobileNav();

        if (openBooking) {
          e.preventDefault();
          // reuse existing booking logic
          const btn = document.getElementById('open-book') || document.getElementById('cta-book');
          btn?.click();
          return;
        }

        if (href.startsWith('#')) {
          e.preventDefault();
          const target = document.querySelector(href);
          if (target) {
            const y = target.getBoundingClientRect().top + window.pageYOffset - 90;
            window.scrollTo({ top: y, behavior: 'smooth' });
          }
        }
      });
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMobileNav();
    });
  }


  // ---------- FAQ toggle ----------
  $$('.faq-item button').forEach((btn) => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      const panel = btn.nextElementSibling;
      if (panel) panel.style.display = expanded ? 'none' : 'block';
    });
  });

  // ---------- Smooth scroll (ignore booking buttons) ----------
  $$('a[href^="#"]').forEach((a) => {
    a.addEventListener('click', (e) => {
      const href = a.getAttribute('href') || '';
      if (a.dataset.openBooking === '1' || a.id === 'cta-book' || a.id === 'open-book') return;
      const target = $(href);
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });

  // ---------- Toast ----------
  const toast = (() => {
    const el = document.createElement('div');
    el.className = 'toast';
    document.body.appendChild(el);
    return {
      show(msg) {
        el.textContent = msg;
        el.classList.add('show');
        clearTimeout(el._t);
        el._t = setTimeout(() => el.classList.remove('show'), 3200);
      }
    };
  })();

  // ---------- Sliders (Slu≈æby / Cen√≠k) ----------
  function attachSlider(wrapSel, rowSel) {
    const wrap = $(wrapSel);
    if (!wrap) return;
    const row = $(rowSel, wrap);
    const left = $('.scroll-btn.left', wrap);
    const right = $('.scroll-btn.right', wrap);
    if (!row || !left || !right) return;

    const step = () => Math.max(260, Math.round(row.clientWidth * 0.85));

    left.addEventListener('click', (e) => { e.preventDefault(); row.scrollBy({ left: -step(), behavior:'smooth' }); });
    right.addEventListener('click', (e) => { e.preventDefault(); row.scrollBy({ left: step(), behavior:'smooth' }); });

    function update() {
      const centerY = row.offsetTop + (row.offsetHeight / 2);
      left.style.top = centerY + 'px';
      right.style.top = centerY + 'px';

      const max = row.scrollWidth - row.clientWidth;
      const x = row.scrollLeft;
      left.style.opacity = (x <= 2) ? '0.35' : '1';
      right.style.opacity = (x >= max - 2) ? '0.35' : '1';
      left.disabled = x <= 2;
      right.disabled = x >= max - 2;
    }

    row.addEventListener('scroll', update, { passive: true });
    window.addEventListener('resize', update);
    requestAnimationFrame(update);
  }

  attachSlider('.services-wrap', '.services-row');
  attachSlider('.pricing-wrap', '.pricing');

  // ---------- Theme toggle ----------
  const themeBtn = $('#theme-toggle');
  const THEME_KEY = 'bb_theme';

  function setTheme(mode) {
    document.body.classList.toggle('theme-light', mode === 'light');
    if (themeBtn) themeBtn.textContent = (mode === 'light') ? '‚òÄ' : '‚òæ';
    localStorage.setItem(THEME_KEY, mode);
  }

  const saved = localStorage.getItem(THEME_KEY);
  setTheme(saved === 'light' ? 'light' : 'dark');

  themeBtn?.addEventListener('click', () => {
    const isLight = document.body.classList.contains('theme-light');
    setTheme(isLight ? 'dark' : 'light');
  });

  // ---------- Booking modal ----------
  const bookingModal = $('#booking-modal');
  const bookingForm  = $('#booking-form');

  const openBtns = [$('#cta-book'), $('#open-book'), ...$$('[data-open-booking="1"]')].filter(Boolean);
  const cancelBtn = $('#booking-cancel');

  function openBooking() {
    if (!bookingModal) return;
    bookingModal.classList.add('active');
    document.body.style.overflow = 'hidden';
    initDate();
    refreshTimes(); // fetch from API
  }
  function closeBooking() {
    if (!bookingModal) return;
    bookingModal.classList.remove('active');
    document.body.style.overflow = '';
  }

  openBtns.forEach((b) => b.addEventListener('click', (e) => { e.preventDefault(); openBooking(); }));
  cancelBtn?.addEventListener('click', (e) => { e.preventDefault(); closeBooking(); });

  bookingModal?.addEventListener('click', (e) => { if (e.target === bookingModal) closeBooking(); });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeBooking(); });

  // ---------- Booking (API mode) ----------
  const elName   = $('#b-name');
  const elPhone  = $('#b-phone');
  const elEmail  = $('#b-email');
  const elService= $('#b-service');
  const elDate   = $('#b-date');
  const elTime   = $('#b-time');
  const elNote   = $('#b-note');

  function pad(n){ return String(n).padStart(2,'0'); }

  function initDate(){
    if (!elDate) return;
    const today = new Date();
    const min = `${today.getFullYear()}-${pad(today.getMonth()+1)}-${pad(today.getDate())}`;
    elDate.min = min;
    if (!elDate.value) elDate.value = min;
  }

  // Basic validation errors
  function showError(field, msg){
    if (!field) return;
    let next = field.nextElementSibling;
    if (next && next.classList.contains('field-error')) { next.textContent = msg; return; }
    const el = document.createElement('div');
    el.className = 'field-error';
    el.textContent = msg;
    field.parentNode.insertBefore(el, field.nextSibling);
  }
  function clearError(field){
    if (!field) return;
    let next = field.nextElementSibling;
    if (next && next.classList.contains('field-error')) next.remove();
  }

  async function fetchSlots(dateStr, serviceKey){
    const url = `/api/availability?date=${encodeURIComponent(dateStr)}&serviceKey=${encodeURIComponent(serviceKey)}`;
    const r = await fetch(url, { headers: { 'Accept':'application/json' } });
    const j = await r.json();
    if (!r.ok) throw new Error(j?.error || 'Chyba p≈ôi naƒç√≠t√°n√≠ dostupn√Ωch term√≠n≈Ø.');
    return j.slots || [];
  }

  let _refreshToken = 0;

  async function refreshTimes(){
    if (!elDate || !elTime || !elService) return;
    const dateStr = elDate.value;
    const serviceKey = elService.value;

    const token = ++_refreshToken;
    const prev = elTime.value;

    // loading state
    elTime.innerHTML = '';
    const optLoading = document.createElement('option');
    optLoading.value = '';
    optLoading.textContent = 'Naƒç√≠t√°m dostupn√© ƒçasy...';
    elTime.appendChild(optLoading);
    elTime.disabled = true;

    try{
      const slots = await fetchSlots(dateStr, serviceKey);
      if (token != _refreshToken) return; // ignore stale

      elTime.innerHTML = '';

      const opt0 = document.createElement('option');
      opt0.value = '';
      opt0.textContent = slots.length ? 'Vyberte ƒças' : 'Pro tento den nejsou voln√© ƒçasy';
      elTime.appendChild(opt0);

      slots.forEach((s) => {
        const opt = document.createElement('option');
        opt.value = s;
        opt.textContent = s;
        elTime.appendChild(opt);
      });

      elTime.disabled = slots.length === 0;

      if (slots.includes(prev)) elTime.value = prev;
    } catch(err){
      if (token != _refreshToken) return;
      elTime.innerHTML = '';
      const optErr = document.createElement('option');
      optErr.value = '';
      optErr.textContent = 'Nepoda≈ôilo se naƒç√≠st term√≠ny';
      elTime.appendChild(optErr);
      elTime.disabled = true;
      toast.show(err.message || 'Chyba p≈ôi naƒç√≠t√°n√≠ term√≠n≈Ø.');
    }
  }

  elDate?.addEventListener('change', () => { clearError(elTime); refreshTimes(); });
  elService?.addEventListener('change', () => { clearError(elTime); refreshTimes(); });

  bookingForm?.addEventListener('submit', async (e) => {
    e.preventDefault();
    [elName, elPhone, elDate, elTime].forEach(clearError);

    const name = (elName?.value || '').trim();
    const phone = (elPhone?.value || '').trim();
    const email = (elEmail?.value || '').trim();
    const serviceKey = elService?.value || '';
    const serviceName = elService?.options?.[elService.selectedIndex]?.textContent?.trim() || '';
    const dateStr = elDate?.value || '';
    const timeStr = elTime?.value || '';
    const note = (elNote?.value || '').trim();

    if (name.length < 3) { showError(elName, 'Zadejte pros√≠m cel√© jm√©no.'); return; }
    if (phone.length < 6) { showError(elPhone, 'Zadejte pros√≠m telefon.'); return; }
    if (!dateStr) { showError(elDate, 'Vyberte datum.'); return; }
    if (!timeStr) { showError(elTime, 'Vyberte ƒças.'); return; }

    try{
      const r = await fetch('/api/book', {
        method: 'POST',
        headers: { 'Content-Type':'application/json', 'Accept':'application/json' },
        body: JSON.stringify({
          name, phone, email,
          serviceKey,
          serviceName,
          date: dateStr,
          startTime: timeStr,
          note
        })
      });
      const j = await r.json();

      if (!r.ok){
        if (r.status === 409){
          showError(elTime, 'Tento term√≠n u≈æ je obsazen√Ω. Vyberte jin√Ω ƒças.');
          await refreshTimes();
          return;
        }
        throw new Error(j?.error || 'Rezervaci se nepoda≈ôilo odeslat.');
      }

      toast.show('Rezervace potvrzena ‚úÖ');
      bookingForm.reset();
      initDate();
      await refreshTimes();
      closeBooking();
    } catch(err){
      toast.show(err.message || 'Rezervaci se nepoda≈ôilo odeslat.');
    }
  });
});</script>
<button aria-label="P≈ôepnout svƒõtl√Ω/tmav√Ω motiv" class="theme-toggle" id="theme-toggle" type="button">‚òæ</button></body>
</html>
